<div class="logo" x-data x-init="
  const dark = document.documentElement.classList.contains('dark');
  const colors = dark ? [
    { fill: '#7BAAE8', opacity: '0.5', scan: '#7BAAE8' },
    { fill: '#ade8bf', opacity: '0.7', scan: '#6CDB8E' },
    { fill: '#f8485e', opacity: '0.45', scan: '#f8485e' },
    { fill: '#8b5e4b', opacity: '0.5', scan: '#B07D6A' }
  ] : [
    { fill: '#5e93db', opacity: '0.3', scan: '#5e93db' },
    { fill: '#ade8bf', opacity: '0.5', scan: '#4aba6a' },
    { fill: '#f8485e', opacity: '0.25', scan: '#f8485e' },
    { fill: '#623b2a', opacity: '0.3', scan: '#8b5e4b' }
  ];
  const c = colors[Math.floor(Math.random() * colors.length)];
  const label = $el.querySelector('.logo-label-zone');
  label.setAttribute('fill', c.fill);
  label.setAttribute('fill-opacity', c.opacity);
  $el.querySelectorAll('.logo-scan').forEach(l => l.setAttribute('stroke', c.scan));
">
  <svg class="logo-mark" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <style>
      html.dark .logo-bg { fill: #7BAAE8; fill-opacity: 0.15; }
      html.dark .logo-body { fill: #1C1C21; }
      html.dark .logo-outline { stroke: #505058; }
      html.dark .logo-cap { fill: #C8CACC; }
    </style>
    <defs>
      <clipPath id="logo-bottle-clip">
        <path d="M11.2 7.5C11.2 6.67 11.8 6 12.4 6H15.6C16.2 6 16.8 6.67 16.8 7.5V8.5L17.4 10.9C17.5 11.28 17.6 11.68 17.6 12.08V20C17.6 21.1 16.8 22 16 22H12C11.1 22 10.4 21.1 10.4 20V12.08C10.4 11.68 10.5 11.28 10.6 10.9L11.2 8.5V7.5Z"/>
      </clipPath>
      <!-- Clip for outline: body only, below cap -->
      <clipPath id="logo-body-clip">
        <rect x="0" y="8.5" width="28" height="20"/>
      </clipPath>
    </defs>
    <rect class="logo-bg" width="28" height="28" rx="6" fill="#5e93db" fill-opacity="0.1"/>
    <!-- Body fill (no stroke) -->
    <path class="logo-body" d="M11.2 7.5C11.2 6.67 11.8 6 12.4 6H15.6C16.2 6 16.8 6.67 16.8 7.5V8.5L17.4 10.9C17.5 11.28 17.6 11.68 17.6 12.08V20C17.6 21.1 16.8 22 16 22H12C11.1 22 10.4 21.1 10.4 20V12.08C10.4 11.68 10.5 11.28 10.6 10.9L11.2 8.5V7.5Z" fill="#FFFFFF"/>
    <!-- Cap -->
    <rect class="logo-cap" x="8" y="4" width="12" height="4.8" fill="#3A3A3A" clip-path="url(#logo-bottle-clip)"/>
    <!-- Colored label zone (set by Alpine) -->
    <rect class="logo-label-zone" x="8" y="8.5" width="12" height="5.5" fill="#5e93db" fill-opacity="0.3" clip-path="url(#logo-bottle-clip)"/>
    <!-- Outline: body only, clipped to hide around cap -->
    <path class="logo-outline" d="M11.2 7.5C11.2 6.67 11.8 6 12.4 6H15.6C16.2 6 16.8 6.67 16.8 7.5V8.5L17.4 10.9C17.5 11.28 17.6 11.68 17.6 12.08V20C17.6 21.1 16.8 22 16 22H12C11.1 22 10.4 21.1 10.4 20V12.08C10.4 11.68 10.5 11.28 10.6 10.9L11.2 8.5V7.5Z" fill="none" stroke="#C8CACC" stroke-width="1" stroke-linejoin="round" clip-path="url(#logo-body-clip)"/>
    <!--
      Scan animation: 12s cycle, alternating direction
      0-0.5s:   expand at top
      0.5-2.5s: sweep DOWN
      2.5-3s:   fade out at bottom
      3-6s:     pause (3s)
      6-6.5s:   expand at bottom
      6.5-8.5s: sweep UP
      8.5-9s:   fade out at top
      9-12s:    pause (3s)
    -->
    <!-- Glow trail (wide, faint) -->
    <line class="logo-scan" x1="14" y1="3" x2="14" y2="3" stroke="#5e93db" stroke-width="4" stroke-linecap="round" opacity="0">
      <animate attributeName="x1"     values="14;7;7;14;14;7;7;14;14"          keyTimes="0;0.042;0.208;0.25;0.5;0.542;0.708;0.75;1" dur="12s" repeatCount="indefinite"/>
      <animate attributeName="x2"     values="14;21;21;14;14;21;21;14;14"      keyTimes="0;0.042;0.208;0.25;0.5;0.542;0.708;0.75;1" dur="12s" repeatCount="indefinite"/>
      <animate attributeName="y1"     values="3;3;25;25;25;25;3;3;3"           keyTimes="0;0.042;0.208;0.25;0.5;0.542;0.708;0.75;1" dur="12s" repeatCount="indefinite"/>
      <animate attributeName="y2"     values="3;3;25;25;25;25;3;3;3"           keyTimes="0;0.042;0.208;0.25;0.5;0.542;0.708;0.75;1" dur="12s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0;0.15;0.15;0;0;0.15;0.15;0;0" keyTimes="0;0.042;0.208;0.25;0.5;0.542;0.708;0.75;1" dur="12s" repeatCount="indefinite"/>
    </line>
    <!-- Sharp scan line -->
    <line class="logo-scan" x1="14" y1="3" x2="14" y2="3" stroke="#5e93db" stroke-width="1.5" stroke-linecap="round" opacity="0">
      <animate attributeName="x1"     values="14;6;6;14;14;6;6;14;14"          keyTimes="0;0.042;0.208;0.25;0.5;0.542;0.708;0.75;1" dur="12s" repeatCount="indefinite"/>
      <animate attributeName="x2"     values="14;22;22;14;14;22;22;14;14"      keyTimes="0;0.042;0.208;0.25;0.5;0.542;0.708;0.75;1" dur="12s" repeatCount="indefinite"/>
      <animate attributeName="y1"     values="3;3;25;25;25;25;3;3;3"           keyTimes="0;0.042;0.208;0.25;0.5;0.542;0.708;0.75;1" dur="12s" repeatCount="indefinite"/>
      <animate attributeName="y2"     values="3;3;25;25;25;25;3;3;3"           keyTimes="0;0.042;0.208;0.25;0.5;0.542;0.708;0.75;1" dur="12s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0;0.85;0.85;0;0;0.85;0.85;0;0" keyTimes="0;0.042;0.208;0.25;0.5;0.542;0.708;0.75;1" dur="12s" repeatCount="indefinite"/>
    </line>
  </svg>
  <span class="logo-text">Soylent Tracker</span>
  <span class="logo-flag">{% include "partials/flag_ca.html" %}</span>
</div>
